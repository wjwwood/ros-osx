Index: rosdep.yaml
===================================================================
--- rosdep.yaml	(revision 135)
+++ rosdep.yaml	(working copy)
@@ -3,28 +3,53 @@
   debian: libtbb-dev
   fedora: tbb
   macports: tbb
+  osx:
+    lion:
+      homebrew:
+        packages: [ tbb ]
 libvtk:
   ubuntu: libvtk5-dev
   debian: libvtk5-dev
   fedora: vtk-devel
   macports: vtk-devel
+  osx:
+    lion:
+      homebrew:
+        packages: [ vtk ]
+        args: [ --python ]
 unzip:
   ubuntu: unzip
   debian: unzip
   fedora: unzip
   macports: unzip
+  osx:
+    lion:
+      homebrew:
+        packages: |
 hdf5:
   ubuntu: libhdf5-serial-dev
   debian: libhdf5-serial-dev
   fedora: hdf5-devel
   macports: hdf5-18
+  osx:
+    lion:
+      homebrew:
+        packages: [ hdf5 ]
 libqhull:
   ubuntu: libqhull-dev
   debian: libqhull-dev
   fedora: qhull-devel
   macports: qhull
+  osx:
+    lion:
+      homebrew:
+        packages: [ qhull ]
 cmake:
   ubuntu: cmake
   debian: cmake
   fedora: cmake
   macports: cmake
+  osx:
+    lion:
+      homebrew:
+        packages: [ cmake ]
Index: pcl/osx_interactor_workaround.patch
===================================================================
--- pcl/osx_interactor_workaround.patch	(revision 0)
+++ pcl/osx_interactor_workaround.patch	(revision 0)
@@ -0,0 +1,29 @@
+--- visualization/src/interactor.cpp	2011-07-14 17:58:55.000000000 -0500
++++ visualization/src/interactor.cpp	2011-09-05 23:38:09.000000000 -0500
+@@ -55,12 +55,16 @@
+     void 
+     PCLVisualizerInteractor::stopLoop ()
+     {
+-#if defined _WIN32 || defined VTK_USE_CARBON || defined VTK_USE_CARBON
++#if defined _WIN32 
+       BreakLoopFlagOn ();
+       // Send a VTK_BreakWin32Loop ClientMessage event to be sure we pop out of the
+       // event loop.  This "wakes up" the event loop.  Otherwise, it might sit idle
+       // waiting for an event before realizing an exit was requested.
++#if defined _WIN32
+       SendMessage (this->WindowId, RegisterWindowMessage (TEXT ("VTK_BreakWin32Loop")), 0, 0);
++#endif
++#elif defined VTK_USE_COCOA || defined VTK_USE_CARBON
++// Do nothing
+ #else
+       BreakLoopFlagOn ();
+       XClientMessageEvent client;
+@@ -75,7 +79,7 @@
+ #endif
+     }
+ 
+-#if defined _WIN32 || defined VTK_USE_CARBON || defined VTK_USE_CARBON
++#if defined _WIN32
+     //////////////////////////////////////////////////////////////////////////
+     void 
+     PCLVisualizerInteractor::Start ()
Index: pcl/Makefile
===================================================================
--- pcl/Makefile	(revision 135)
+++ pcl/Makefile	(working copy)
@@ -4,6 +4,7 @@
 TARBALL_URL = https://code.ros.org/svn/release/download/thirdparty/pcl/pcl-1.1.0.tar.gz
 SOURCE_DIR = build/pcl
 UNPACK_CMD = tar xzf
+TARBALL_PATCH = osx_interactor_workaround.patch
 include $(shell rospack find mk)/download_unpack_build.mk
 
 #SVN_DIR = build/pcl_trunk
Index: pcl/Makefile
===================================================================
--- pcl/Makefile	(revision 135)
+++ pcl/Makefile	(working copy)
@@ -22,31 +22,32 @@
 	export LD_LIBRARY_PATH=`rospack find std_msgs`/lib:`rospack find sensor_msgs`/lib:`rospack find roscpp_serialization`/lib:`rospack find cpp_common`/lib:`rospack find rostime`/lib:`rospack find roscpp_traits`/lib:`rospack find roscpp`/lib:`rospack find rosconsole`/lib:`rospack find std_msgs`/lib:`rospack find sensor_msgs`/lib:$$LD_LIBRARY_PATH && \
 	cmake -DCMAKE_INSTALL_PREFIX=`pwd`/../../.. \
 				-DCMAKE_BUILD_TYPE=Release \
+				-DCMAKE_OSX_ARCHITECTURES="x86_64" \
 				-DUSE_ROS=ON \
-          -DFLANN_INCLUDE_DIR=`rospack find flann`/include \
-          -DFLANN_LIBRARY=`rospack find flann`/lib/libflann.so \
-          -DCMINPACK_INCLUDE_DIR=`rospack find cminpack`/include \
-          -DCMINPACK_LIBRARY=`rospack find cminpack`/lib/libcminpack.so \
-	-DBUILD_TESTS=OFF \
-	-DBUILD_OPENNI=ON \
-	-DBUILD_apps=OFF \
-	-DBUILD_common=ON \
-	-DBUILD_features=ON \
-	-DBUILD_filters=ON \
-	-DBUILD_global_tests=OFF \
-	-DBUILD_io=ON \
-	-DBUILD_octree=ON \
-	-DBUILD_kdtree=ON \
-	-DBUILD_keypoints=ON \
-	-DBUILD_range_image=ON \
-	-DBUILD_registration=ON \
-	-DBUILD_sample_consensus=ON \
-	-DBUILD_segmentation=ON \
-	-DBUILD_surface=ON \
-	-DBUILD_visualization=ON \
-	-DCMAKE_VERBOSE_MAKEFILE=ON \
-	.. && \
-	make ${ROS_PARALLEL_JOBS} install
+				-DFLANN_INCLUDE_DIR=`rospack find flann`/include \
+				-DFLANN_LIBRARY=`rospack find flann`/lib/libflann.dylib \
+				-DCMINPACK_INCLUDE_DIR=`rospack find cminpack`/include \
+				-DCMINPACK_LIBRARY=`rospack find cminpack`/lib/libcminpack.dylib \
+				-DBUILD_TESTS=OFF \
+				-DBUILD_OPENNI=ON \
+				-DBUILD_apps=OFF \
+				-DBUILD_common=ON \
+				-DBUILD_features=ON \
+				-DBUILD_filters=ON \
+				-DBUILD_global_tests=OFF \
+				-DBUILD_io=ON \
+				-DBUILD_octree=ON \
+				-DBUILD_kdtree=ON \
+				-DBUILD_keypoints=ON \
+				-DBUILD_range_image=ON \
+				-DBUILD_registration=ON \
+				-DBUILD_sample_consensus=ON \
+				-DBUILD_segmentation=ON \
+				-DBUILD_surface=ON \
+				-DBUILD_visualization=ON \
+				-DCMAKE_VERBOSE_MAKEFILE=ON \
+				.. && \
+				make ${ROS_PARALLEL_JOBS} install
 	touch installed
 
 cleaned: Makefile
